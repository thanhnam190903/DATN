<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org">
<head th:replace="admin/layout/head :: head">

</head>
<body class="hold-transition skin-blue sidebar-mini ">
<!-- Site wrapper -->
<div class="wrapper">

    <header th:replace="admin/layout/header :: header"></header>
    <!-- =============================================== -->

    <!-- Left side column. contains the sidebar -->
    <aside th:replace="admin/layout/aside :: aside"></aside>
    <!-- =============================================== -->

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                Quản lý ca chiếu

            </h1>
            <ol class="breadcrumb">
                <li><a href="#" th:href="@{/quantri}"><i class="fa fa-dashboard"></i> Home</a></li>
            </ol>
        </section>

        <!-- Main content -->
        <section class="content">

            <!-- Default box -->
            <div class="col-xs-12">
                <div class="box">
                    <div class="box-header">
                        <a href="#" th:href="@{/quantri/add-cachieu}" class="btn btn-success">Thêm mới ca chiếu</a>

                        <div class="box-tools">
                            <form>
                                <div class="input-group input-group-sm" style="width: 150px;">
                                    <input type="text" name="key" class="form-control pull-right" placeholder="Search" th:value="${key}">

                                    <div class="input-group-btn">
                                        <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body table-responsive no-padding">
                        <table class="table table-hover">
                            <tbody><tr>
                                <th>Mã ca chiếu</th>
                                <th>Ngày chiếu</th>
                                <th>Giờ chiếu</th>
                                <th>Giờ kết thúc </th>
                                <th>Tên phòng chiếu</th>
                                <th>Tên phim</th>
                                <th>Tùy chọn</th>
                            </tr>
                            <tr th:each="cachieu : ${caChieus}">
                                <td th:text="${cachieu.id}"></td>
                                <td th:text="${#dates.format(cachieu.ngayChieu.ngayChieu, 'dd/MM/yyyy')}"></td>
                                <td th:text="${cachieu.gioChieu}"></td>
                                <td th:text="${cachieu.giokt}"></td>
                                <td th:text="${cachieu.phongChieu.tenPhong}"></td>
                                <td th:text="${cachieu.phim.tenPhim}"></td>
                                <td>
                                    <a th:href="@{/quantri/update-cachieu(id=${cachieu.id})}" class="btn btn-success">Sửa</a>
                                    <a th:href="@{/quantri/delete-cachieu(id=${cachieu.id})}" class="btn btn-danger"
                                       onclick="return confirm('Bạn có chắc chắn muốn xóa ca chiếu này không')">Xóa</a>
                                </td>
                            </tr>

                            </tbody></table>
                    </div>
                    <!-- /.box-body -->
                    <div class="box-footer clearfix">
                        <ul class="pagination pagination-sm no-margin pull-right">
                            <li th:if="${currentPage > 1}">
                                <a th:href="@{/quantri/cachieu(page=${currentPage - 1}, key=${key})}">&laquo;</a>
                            </li>

                            <!-- Hiển thị các trang từ trang hiện tại - 2 đến trang hiện tại + 2 -->
                            <li th:each="pageNum : ${#numbers.sequence(currentPage > 2 ? currentPage - 2 : 1, currentPage + 2 > totalPages ? totalPages : currentPage + 2)}"
                                th:classappend="${pageNum == currentPage} ? 'active'">
                                <a th:href="@{/quantri/cachieu(page=${pageNum}, key=${key})}" th:text="${pageNum}"></a>
                            </li>

                            <!-- Nút chuyển đến trang cuối cùng nếu còn nhiều trang -->
                            <li th:if="${currentPage < totalPages}">
                                <a th:href="@{/quantri/cachieu(page=${currentPage + 1}, key=${key})}">&raquo;</a>
                            </li>

                            <!-- Nút đến trang cuối cùng nếu có nhiều hơn 5 trang -->
                            <li th:if="${totalPages > 5 && currentPage < totalPages - 2}">
                                <a th:href="@{/quantri/cachieu(page=${totalPages}, key=${key})}">&raquo;&raquo;</a>
                            </li>
                        </ul>

                    </div>
                </div>
            </div>
            <!-- /.box -->

            <!-- /.box -->

        </section>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <footer th:replace="admin/layout/footer :: footer"></footer>

</div>
<!-- ./wrapper -->

<!-- jQuery 3 -->
<div th:replace="admin/layout/script :: script"></div>
</body>
</html>
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="client/layout/head :: head">
</head>
<body>
<div th:replace="client/layout/topbar :: topbar"></div>
<!-- Navbar & Hero Start -->
<div th:replace="client/layout/navbar :: navbar"></div>
<!-- Navbar & Hero End -->

<!-- Services Start -->
<div class="container-fluid service py-5">
    <div class="container py-5">
        <div class="section-title mb-5 wow fadeInUp" data-wow-delay="0.2s">
            <div class="sub-style">
                <h1 class="sub-title px-3 mb-0">Tất cả các rạp</h1>
            </div>
        </div>
        <div class="row g-4 justify-content-center">
            <div class="container row">
                <div class="col-md-12 rap-border">
                    <ul class="navbar" style="list-style-type: none; justify-content: unset !important">
                        <li class="nav-item rap-nav-item " style="padding: 12px 10px;" th:each="diachi : ${diaChiRap}" th:text="${diachi}" th:name="diachi" th:onclick="'loadRaps(this) , activateItem(this)'" th:data-dc="${diachi}"></li>
                    </ul>
                    <div id="raps-list"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Team Start -->
<script>
    function activateItem(element) {
            var items = document.querySelectorAll('.rap-nav-item');
            items.forEach(function(item) {
                item.classList.remove('active');
            });

            element.classList.add('active');
    }
    function loadRaps(element) {
    var diaChi = element.getAttribute('data-dc');
    $.ajax({
        url: '/home/loadrapbydiachi',
        type: 'GET',
        data: { diachi: diaChi },
        success: function(data) {
            console.log('Data received:', data);
            let rapsList = '<hr><ul class="navbar nav-booking" style="list-style-type: none; justify-content:unset !important">';
            data.forEach(function(rap) {
                rapsList += '<li class="nav-item border item-booking" style="padding: 12px 10px;"><a href="#" data-r="' + rap.tenRap + '">' + rap.tenRap + '</a></li>';
            });
            rapsList += '</ul>';
            $('#raps-list').html(rapsList);
        },
        error: function(xhr, status, error) {
            console.error('Error loading raps:', error);
            console.error('XHR:', xhr);
            console.error('Status:', status);
        }
    });
}
</script>
<!-- Footer Start -->
<div th:replace="client/layout/footer :: footer"></div>
<!-- Footer End -->

<!-- Back to Top -->
<a href="#" class="btn btn-primary btn-lg-square back-to-top"><i class="fa fa-arrow-up"></i></a>

<!-- JavaScript Libraries -->
<div th:replace="client/layout/script :: script"></div>

</body>

</html>